# [Gold V] 새로운 AVL 트리 만들기 - 31530 

[문제 링크](https://www.acmicpc.net/problem/31530) 

### 성능 요약

메모리: 295636 KB, 시간: 5376 ms

### 분류

다이나믹 프로그래밍

### 제출 일자

2025년 2월 12일 15:49:08

### 문제 설명

<p>AVL 트리는 해당 트리를 만든 Adelson-Velsky와 Landis의 이름을 딴 트리이다.</p>

<p>AVL 트리를 정의하기 위해 먼저 노드별로 ”균형값”을 정의한다. 어떤 노드의 균형값이란, 해당 노드의 왼쪽 서브트리의 높이를 $h_l$, 오른쪽 서브트리의 높이를 $h_r$이라고 할 때, $h_r-h_l$을 의미한다. 이때, 왼쪽 혹은 오른쪽 자식이 없다면 해당 방향의 서브트리의 높이는 $0$으로 생각한다. 원래 AVL트리는 모든 노드의 균형값이 $-1$, $0$, $1$ 중 하나이다.</p>

<p>MatKor 자료구조 세미나를 들은 민재는 자신의 이름도 넣어 AVLM 트리를 개발하려고 한다. 민재는 기존 AVL 트리에서 노드들의 균형값이 될 수 있는 $-1$, $0$, $1$ 중 일부만을 허용하고자 한다. 그래서 $\{-1,0,1\}$의 공집합이 아닌 부분집합 $S$를 정해, ”리프 노드를 제외한 모든 노드의 균형값이 $S$의 원소 중 하나인 트리”를 새로 정의해 AVLM 트리라는 이름을 붙였다. 이때, 리프 노드는 반드시 균형값이 $0$이므로, 이는 예외로 두었다.</p>

<p>집합 $S$와 AVLM 트리의 높이 $h$가 주어졌을 때, 높이 $h$로 가능한 트리의 모양이 몇 개 있는지 구해보자.</p>

<p>노드 하나만 존재하는 트리의 높이를 $1$이라고 생각한다.</p>

### 입력 

 <p>첫 번째 줄에 테스트 케이스의 개수 $T$가 주어진다. $(1\le T\le 10^6)$</p>

<p>각 테스트 케이스 별로 두 줄의 입력이 주어진다.</p>

<p>첫 번째 줄에 높이 $h$, $S$의 원소의 개수 $\lvert S \rvert$이 공백으로 구분되어 주어진다. $(1\le h\le 10^6;$ $1\le\lvert S \rvert\le 3)$</p>

<p>두 번째 줄에는 노드별로 가능한 균형값을 나타내는 $S$의 서로 다른 원소 $\lvert S \rvert$개가 오름차순으로 주어진다.</p>

<p>$S$는 $\{-1\} ,\{0\} ,\{1\} ,\{-1,0\} ,\{-1,1\} ,\{0,1\} ,\{-1,0,1\}$ 중 하나이다.</p>

<p>같은 테스트 케이스는 여러 번 주어지지 않는다.</p>

### 출력 

 <p>각 테스트 케이스 별로 한 줄에 하나씩 답을 $10^9+7$로 나눈 나머지를 출력한다.</p>

